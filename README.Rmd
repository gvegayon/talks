---
output: github_document
---

# List of talks and presentations ![GitHub last commit](https://img.shields.io/github/last-commit/gvegayon/talks)

A continuous work in progress, you can find more information about my work
[here](https://ggvy.cl).

```{r aux, echo=FALSE}
#' Function to read yaml header in markdown documents.
yaml_header <- function(fn) {
  x   <- readLines(fn, warn = FALSE)
  idx <- which(grepl("^---\\s?$", x, perl = TRUE))#[1:2]
  if (length(idx) < 2)
    return(list())
  idx <- idx[1:2]
  
  x   <- x[(idx[1]+1):(idx[2]-1)]
  
  ans <- structure(
    gsub("^[a-zA-Z0-9_ ]+[:]\\s*", "", x),
    names = gsub("[:].*", "", x)
  )
  
  ans[ans==""] <- NA_character_
  as.list(ans)
}
# yaml_header("20160919-reproducible-research/README.md")

```


```{r table, echo=FALSE}

# Icons
slides_icon <- '<img width="20px" style="filter: brightness(0);" alt="Slides icon" src="https://upload.wikimedia.org/wikipedia/commons/f/f5/PowerPoint_Presentation_Flat_Icon.svg">'
video_icon <- '<img width="20px" alt="Video camera icon" src="https://upload.wikimedia.org/wikipedia/commons/8/82/Font_Awesome_5_regular_video.svg">'
repo_icon <- '<img width="20px" alt="Octocat icon" src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg">'

readmes <- list.files(recursive = TRUE, full.names = TRUE, pattern = "README[.]md")

readmes <- readmes[grepl("[.]/.+/", readmes)]
paths   <- gsub("^[.]/|README[.]md$", "", readmes)
details <- lapply(readmes, yaml_header)

# Which have contents?
idx <- sapply(details, length) > 0
paths <- paths[idx]
details <- details[idx]

vids <- sapply(details, "[[", "video")
repos <- sapply(details, "[[", "repo")

# Building the table
tab <- data.frame(
  Title = sprintf(
    "<a href=\"%sREADME.md\" target=\"_blank\" style=\"font-weight:bold;\">%s</a>",
    paths,
    sapply(details, "[[", "title")
    ),
  Date  = sapply(details, "[[", "date"),
  See   = paste(
    sprintf("<a href =\"%s\" target=\"_blank\">%s</a>", sapply(details, "[[", "slides"), slides_icon),
    ifelse(
      !is.na(vids),
      sprintf("<a href =\"%s\" target=\"_blank\">%s</a>", vids, video_icon),
      ""
      ),
    ifelse(
      !is.na(repos),
      sprintf("<a href=\"%s\" target=\"_blank\">%s</a>", repos, repo_icon),
      ""
    )
  ),
  Type = sapply(details, "[[", "type"),
  stringsAsFactors = FALSE
)
tab$Date <- as.Date(tab$Date)
tab$Title <- paste0(tab$Title, " (", format(tab$Date, format = "%B %e, %Y"), ") ", tab$See)
knitr::kable(tab[order(tab$Date, decreasing = TRUE),-c(2, 3)], row.names = FALSE)
```



